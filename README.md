Библиотека для работы с механическими контактами (кнопками, переключателями и пр.) во FreeRTOS
Функционал:
- Фильтрация дребезга
- Отработка длинного нажатия

Используется HAL и FreeRTOS. В TButton.h требуется указать библиотеку, соответствующую выбранному ядру

Использование:
Для инициализации создаём переменную типа TButton и вызываем TButtonAssign:

TButton Button1;
Button1 = TButtonAssign(Button1_GPIO_Port, Button1_Pin, TBUTTON_BTYPE_NO, TBUTTON_PT_PULL_DOWN, 20, 3); 

Если кнопка не подразумевает долгое нажатие, LongTime ставим 0
Не рекомендуется выбирать значение Confirms менее 5.

В отдельноей таске опрашиваем кнопку:

TButtonTick(Button1);

Периодичность вызова таски следует подбирать исходя из выбранного значения Confirms, имея в виду, что если реакция на нажатие 
происходит позднее, чем через 500мс, у юзера будет ощущение, что девайс тормозит. Рекомедуется периодичность 10..50 мс

В таске с обработчиком нажатия с той же периодичностью проверям, не нажата ли кнопка:

if (TButtonGetState (Button1)==TBUTTON_STATE_CLICKED) {
  ...
  TButtonForcedRelease(Button1); //рекомендуется "отпускать" кнопку после обработки
}

GetState может принимать следующие значения:
TBUTTON_STATE_RELEASED - кнопка отпущена
TBUTTON_STATE_CLICKED - кнопка нажата
TBUTTON_STATE_LONG_PRESSED - долгое нажатие

Если нажаты две конфликтующие кнопки, в обработчике более приоритетной релизим менее приоритетную:

if (TButtonGetState (Stop_Button)==TBUTTON_STATE_CLICKED) {
  TButtonForcedRelease(Start_Button); 
  ...
}
